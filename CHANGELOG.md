# 更新日志 (CHANGELOG)

## [v3.4] - 2026-01-22

### 🚀 功能提升 (Features)
- **渲染逻辑重构**: 深度优化 Markdown 转换逻辑，优先采用标准 HTML 解析以完整保留文章的正文、标题层级和图片排版，有效解决了“图文文章”被误判为“相册页面”导致的正文丢失问题。
- **发布日期自动提取**: 新增从文章 HTML 源码中自动提取 `publish_time` 或 `window.ct` 的功能，使下载的文章带有真实的原始发布日期。
- **智能数据清洗**: 增加了对原始聊天记录 (`messages.txt`) 的提取支持，可自动从混乱的文本中精准识别并去重微信文章 URL。

### 📂 目录结构优化 (Organization)
- **扁平化管理**: 输出文件夹结构由嵌套模式优化为扁平模式：`output/{文章标题}_{发布日期}/`。
- **文件对齐**: 确保 Markdown、PDF 及图片素材 (`assets/`) 均在同一级目录下，大幅提升了在 Obsidian、Zotero 等工具中的引用体验。

### 🔧 稳定性修复 (Bug Fixes)
- **正则表达式修复**: 修复了日期提取逻辑中的正则语法错误。
- **路径与命名**: 增强了对非法字符的过滤 (sanitize)，防止因特殊标题导致的目录创建失败。
- **适配器兼容性**: 解决了在某些 Python 环境下请求 URL 时可能触发的 "No connection adapters" 报错。

---

## [v3.3] - 2026-01-15
- 支持断点续传功能 (history.log)。
- 引入基础 PDF 生成转换。
- 增加数据库解密模块初步逻辑。
